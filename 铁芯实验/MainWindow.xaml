<Window x:Class="铁芯实验.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:铁芯实验" xmlns:view="clr-namespace:铁芯实验.View" xmlns:i="clr-namespace:Microsoft.VisualBasic;assembly=Microsoft.VisualBasic.Core" xmlns:local1="clr-namespace:铁芯实验.Model" xmlns:local2="clr-namespace:铁芯实验.Base"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"       
        WindowState="Maximized"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="主窗口" Height="740" Width="1024">

    <Window.Resources>

        <sys:Double x:Key="RowH">18</sys:Double>

        <Style TargetType="GroupBox">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="Foreground" Value="Black"/>
        </Style>
    </Window.Resources>


    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="419*"/>
            <ColumnDefinition Width="605*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <!-- 菜单高度 这里还要加1个高度，就是 图标高度，就是 最小化 最大话按钮的高度，他们是40 -->
            <RowDefinition Height="20"></RowDefinition>
            <RowDefinition Height="690"></RowDefinition>
        </Grid.RowDefinitions>
        <Menu Height="20" VerticalAlignment="Center" Grid.ColumnSpan="2" >
            <MenuItem Header="试验任务">
                <MenuItem Header="新建试验任务" Click="DoBtnMenu1_1Click" />
                <Separator/>
                <MenuItem Header="退出"  Click="DoBtnMenu1_2Click"/>
            </MenuItem>

            <MenuItem Header="系统设置">
                <MenuItem Header="通讯设置"  Click="DoBtnMenu2_1Click" />
            </MenuItem>

            <MenuItem Header="数据管理">
                <MenuItem Header="产品表"  Click="DoBtnMenu3_1Click" />
                <MenuItem Header="记录表"  Click="DoBtnMenu3_2Click" />
                <MenuItem Header="标准表"  Click="DoBtnMenu3_3Click" />
            </MenuItem>
        </Menu>

        <Border Grid.Row="1" Background="{DynamicResource {x:Static SystemColors.MenuBarBrushKey}}" Margin="-6,0,0,6" Grid.ColumnSpan="2" >
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="560"></ColumnDefinition>
                    <ColumnDefinition Width="240"></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" >
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="0.5*"></RowDefinition>
                            <RowDefinition Height="1.3*"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                </Grid.ColumnDefinitions>

                                <Image Margin="10" Width="90" x:Name="myImage" Source="Asset/headlogo.png" />

                                <GroupBox Grid.Column="1" Grid.ColumnSpan="4" Header="标准" Padding="10" Margin="15,10,5,10" Grid.RowSpan="2">
                                    <GroupBox.HeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                        </DataTemplate>
                                    </GroupBox.HeaderTemplate>

                                    <view:UserStandardControl x:Name="UserStandardControl" ></view:UserStandardControl>
                                </GroupBox>



                            </Grid>
                        </Border>

                        <GroupBox Grid.Column="0"  Header="实时测量数据" Padding="10" Margin="15,122,5,20" Grid.RowSpan="2">

                            <GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                </DataTemplate>
                            </GroupBox.HeaderTemplate>


                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="200"></RowDefinition>
                                    <RowDefinition Height="66"></RowDefinition>
                                </Grid.RowDefinitions>

                                <view:UserMainControl Grid.Row="0" x:Name="UserMainControl"></view:UserMainControl>

                                <StackPanel x:Name="StackPanel1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,196,0,4" Grid.RowSpan="2">
                                    <Button x:Name="BCommandStart" Content="开始测量" Command="{Binding BtnCommandStart}" CommandParameter="{Binding ElementName=StackPanel1}" Margin="10 0" Width="80" Height="35"></Button>
                                    <Button x:Name="BCommandStop" Content="停止测量" Command="{Binding BtnCommandStop}" CommandParameter="{Binding ElementName=StackPanel1}" Margin="10 0" Width="80" Height="35" IsEnabled="False"></Button>
                                    <Button x:Name="BCommandSave" Content="保存数据" Command="{Binding BtnCommandSave}" Margin="10 0" Width="80" Height="35"></Button>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Grid.Row="2" Grid.Column="0" Header="测试结果数据" Padding="10" Margin="15,0,5,20">
                            <GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                </DataTemplate>
                            </GroupBox.HeaderTemplate>

                            <view:UserRecordControl x:Name="UserRecordControl"></view:UserRecordControl>
                        </GroupBox>

                    </Grid>


                </Border>


                <Border Grid.Column="1" Grid.RowSpan="2">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="0.5*"></RowDefinition>
                            <RowDefinition Height="1.3*"></RowDefinition>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>

                        <GroupBox Grid.Row="0" Grid.Column="0" Header="变频电源状态" Padding="10" Margin="10">

                            <GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                </DataTemplate>
                            </GroupBox.HeaderTemplate>
                            <view:PowerStateControl x:Name="PowerStateControl" ></view:PowerStateControl>
                            
                        </GroupBox>

                        <GroupBox Grid.Column="0" Header="变频电源设置" Padding="10" Margin="10,122,10,20" Grid.RowSpan="2">
                            <GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                </DataTemplate>
                            </GroupBox.HeaderTemplate>

                            <view:UserPowerSet x:Name="UserPowerSetControl" Loaded="UserPowerSetControl_Loaded"></view:UserPowerSet>
                        </GroupBox>

                        <GroupBox Grid.Row="2" Grid.Column="0" Header="日志" Padding="10" Margin="10,0,10,20">
                            <GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                </DataTemplate>
                            </GroupBox.HeaderTemplate>

                            <ListBox ItemsSource="{Binding ListBoxData}" Grid.Column="1" FontSize="15" >
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Foreground" Value="Blue"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsRed}" Value="True">
                                                            <Setter Property="Foreground" Value="Red"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                            <TextBlock.Text>
                                                <Binding Path="Text"/>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </GroupBox>

                    </Grid>

                </Border>

                <Border Grid.Row="0" Grid.Column="2" Grid.RowSpan="2">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="0.5*"></RowDefinition>
                            <RowDefinition Height="1.3*"></RowDefinition>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>

                        <GroupBox Grid.Row="0" Grid.Column="2" Header="通讯状态" Padding="10" Margin="10">
                            <GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                </DataTemplate>
                            </GroupBox.HeaderTemplate>

                            <view:UserCommunicationControl x:Name="UserCommunicationControl"></view:UserCommunicationControl>
                            
                        </GroupBox>

                        <GroupBox Header="测试设置" Padding="10" Margin="10,122,10,20" Grid.RowSpan="2">
                            <GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                </DataTemplate>
                            </GroupBox.HeaderTemplate>

                            <view:UserTestControl x:Name="UserTestControl" Loaded="UserTestControl_Loaded"></view:UserTestControl>
                            
                        </GroupBox>

                        <GroupBox Grid.Row="2" Header="产品信息" Padding="10" Margin="10,0,10,20">
                            <GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" FontSize="{Binding Source={StaticResource RowH}}" />
                                </DataTemplate>
                            </GroupBox.HeaderTemplate>

                            <view:UserInfoControl x:Name="UserInfoControl"></view:UserInfoControl>
                        </GroupBox>

                    </Grid>
                </Border>

            </Grid>


        </Border>


    </Grid>
</Window>
